(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d621c"],{"70f3":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"root"},[a("h1",{staticStyle:{"text-align":"center"}},[e._v("Message setup")]),e._v(" "),a("div",{staticStyle:{"margin-left":"75%","margin-bottom":"3%"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleCreate}},[e._v("Create")])],1),e._v(" "),a("el-table",{staticStyle:{"margin-left":"2%",width:"96%"},attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"ProtocolMsgType",label:"ProtocolMsgType",width:"150%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"MsgHeader",label:"MsgHeader"}}),e._v(" "),a("el-table-column",{attrs:{prop:"MsgEndFlag",label:"MsgEndFlag"}}),e._v(" "),a("el-table-column",{attrs:{prop:"FieldCount",label:"FieldCount"}}),e._v(" "),a("el-table-column",{attrs:{prop:"UploadFormat",label:"UploadFormat",width:"160%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ToBeUpload",label:"ToBeUpload"}}),e._v(" "),a("el-table-column",{attrs:{prop:"SampleIDFrom",label:"SampleIDFrom",width:"150%"}}),e._v(" "),a("el-table-column",{attrs:{label:"Edit",width:"80%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleMessageEdit(t.row)}}},[e._v("编辑")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Delete",width:"80%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Field",width:"80%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.viewField(t.row)}}},[e._v("查看")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{visible:e.messageDialogVisible,title:"EditProtocolMessage",width:"30%"},on:{"update:visible":function(t){e.messageDialogVisible=t}}},[a("el-form",{attrs:{model:e.message,"label-width":"40%","label-position":"left"}},[a("el-form-item",{attrs:{label:"ProtocolMsgType"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"ProtocolMsgType"},model:{value:e.message.ProtocolMsgType,callback:function(t){e.$set(e.message,"ProtocolMsgType",t)},expression:"message.ProtocolMsgType"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"MsgHeader"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"MsgHeader"},model:{value:e.message.MsgHeader,callback:function(t){e.$set(e.message,"MsgHeader",t)},expression:"message.MsgHeader"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"MsgEndFlag"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"MsgEndFlag"},model:{value:e.message.MsgEndFlag,callback:function(t){e.$set(e.message,"MsgEndFlag",t)},expression:"message.MsgEndFlag"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"FieldCount"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"FieldCount"},model:{value:e.message.FieldCount,callback:function(t){e.$set(e.message,"FieldCount",t)},expression:"message.FieldCount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"UploadFormat"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"UploadFormat"},model:{value:e.message.UploadFormat,callback:function(t){e.$set(e.message,"UploadFormat",t)},expression:"message.UploadFormat"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"ToBeUpload"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"ToBeUpload"},model:{value:e.message.ToBeUpload,callback:function(t){e.$set(e.message,"ToBeUpload",t)},expression:"message.ToBeUpload"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"SampleIDFrom"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:"SampleIDFrom"},model:{value:e.message.SampleIDFrom,callback:function(t){e.$set(e.message,"SampleIDFrom",t)},expression:"message.SampleIDFrom"}})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.messageDialogVisible=!1}}},[e._v("cancel")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirmMessageEdit(e.message)}}},[e._v("save")])],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-bottom":"10%","margin-top":"2%"}},[a("el-button",{attrs:{type:"text"},on:{click:e.toHome}},[e._v("Home Page")])],1)],1)},l=[],o={name:"message",data:function(){return{ProtocolID:0,tableData:[],messageDialogVisible:!1,message:{},type:""}},mounted:function(){this.ProtocolID=localStorage.getItem("ProtocolID"),this.getMessages(this.ProtocolID)},methods:{toHome:function(){this.$router.push({path:"/"})},getMessages:function(e){var t=this;this.req({url:"/getMessage",method:"POST",data:{ProtocolID:e}}).then((function(e){t.tableData=e.data.messageList}),(function(e){console.log(e),t.$message({type:"success",message:"配置获取失败"})}))},handleMessageEdit:function(e){this.messageDialogVisible=!0,this.message=e,this.type="edit"},confirmMessageEdit:function(e){var t=this;"edit"===this.type?this.req({url:"/updateMessage",data:{MsgID:e.MsgID,ProtocolID:e.ProtocolID,ProtocolMsgType:e.ProtocolMsgType,MsgHeader:e.MsgHeader,MsgEndFlag:e.MsgEndFlag,FieldCount:e.FieldCount,UploadFormat:e.UploadFormat,ToBeUpload:e.ToBeUpload,SampleIDFrom:e.SampleIDFrom},method:"POST"}).then((function(e){t.$message({type:"success",message:e.data.message})}),(function(e){console.log("err :",e),t.$message({type:"info",message:"修改失败"})})):this.req({url:"/createMessage",data:{ProtocolID:this.ProtocolID,ProtocolMsgType:e.ProtocolMsgType,MsgHeader:e.MsgHeader,MsgEndFlag:e.MsgEndFlag,FieldCount:e.FieldCount,UploadFormat:e.UploadFormat,ToBeUpload:e.ToBeUpload,SampleIDFrom:e.SampleIDFrom},method:"POST"}).then((function(e){t.$message({type:"success",message:e.data.message}),t.getMessages(t.ProtocolID)}),(function(e){console.log("err :",e),t.$message({type:"info",message:"创建失败"})}))},viewField:function(e){localStorage.setItem("MsgID",e.MsgID),this.$router.push({path:"/protocol/field",name:"field"})},handleCreate:function(){this.messageDialogVisible=!0,this.message={},this.type="create"},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该Message, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){t.req({url:"/deleteMessage",data:{MsgID:e.MsgID},method:"POST"}).then((function(e){t.$message({type:"success",message:e.data.message}),t.getMessages(t.ProtocolID)}),(function(e){console.log("err :",e),t.$message({type:"success",message:"删除失败"})}))}))}}},i=o,n=a("2877"),r=Object(n["a"])(i,s,l,!1,null,"72f65e99",null);t["default"]=r.exports}}]);